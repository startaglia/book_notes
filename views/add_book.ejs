<!DOCTYPE html>
<html lang="en">
    <%- include("./partials/header.ejs") %>
<style>
    .my-active{
        background-color: dodgerblue;
        color: white;
    }
</style>
<body style="background-color: darkslateblue;">
    <div class="d-flex flex-column align-items-center justify-content-center vh-100">
        <h1>Add new book</h1>
        <div class="w-50 mb-5 text-center">
            <form action="/add_book" method="post" >
                <div class="d-flex align-items-center justify-content-center mb-3">
                    <h2 class="me-3">Title: </h2>
                    <input class="form-control form-control-sm " type="text" aria-label="title input" name="title" value="" required>
                </div>
                <div class="d-flex flex-wrap ">
                    <h2 class="me-3">Genre:</h2>
                    <% genres.forEach(genre => { %>
                        <button type="button" class="btn btn-info me-3 mb-3" data-toggle="button" aria-pressed="false" autocomplete="off" name="genre" value="<%= genre %>"> <%= genre %></button>
                    <% }) %>
                </div>
                <div class="d-flex align-items-center flex-wrap mb-3">
                    <h2 class="me-3">Start Date: </h2>
                        <input class="form-control w-auto me-4" type="date" name="startDate" value="" aria-label="Date input for start reading">
                        <span class="fs-4 w-auto me-3">Today</span>
                        <input class="form-check-input mt-0 fs-4" type="checkbox" name="todayStart" value="todayStart" aria-label="Checkbox for today date flag">
                </div>
                <div class="d-flex align-items-center flex-wrap mb-4">
                    <h2 class="me-3">Book finished: </h2>
                    <input class="form-check-input mt-0 fs-4 " type="checkbox" name="isFinish" value="isFinish" aria-label="checkbox for today date flag" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                </div>
                <div id="collapseExample" class="collapse">
                    <div class="d-flex align-items-center flex-wrap mb-3">
                        <h2 class="me-3">End Date: </h2>
                        <input class="form-control w-auto me-4" type="date" name="endDate" value="" aria-label="Date input for end reading">
                        <span class="fs-4 w-auto me-3">Today</span>
                        <input class="form-check-input mt-0 fs-4 " type="checkbox" name="todayEnd" value="todayEnd" aria-label="Checkbox for today date flag">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary mx-auto">Add</button>
            </div>
        </form>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

<script>
    $(document).ready(function () {
        $('.btn').click(function () {
            $(this).closest('.flex-wrap').find('.btn').removeClass('my-active');
            $(this).toggleClass('my-active');
        });
        $('#isFinish').change(function () {
            if (this.checked) {
                $('#endDateContainer').show();
            } else {
                $('#endDateContainer').hide();
            }
        });
    });
</script>
</html>
